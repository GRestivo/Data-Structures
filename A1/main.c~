#include <stdio.h>
#include <stdlib.h>

#include "carList.h"
/*#include "testSort.h"*/
#include "simulation.h"

int main (int argc, char *argv[]) {
  FILE *fPtr;
  int numCars = 0;

  /*Error test to see if there are the correct number of command line arguments, if not end program*/
  if (argc != 2) {
    printf("Incorrect amount of command line arguments!\n");
    return -1;
  }

  /*Opens given file for reading*/
  fPtr = fopen(argv[1], "r");

  /*Sees if file opening was successful, if not end program*/
  if (fPtr == NULL) {
    printf("Error! Could not find designated file.\n");
    return -1;
  }

  List *nList = initializeList(&printCar, &deleteCar, &compareCar);
  List *eList = initializeList(&printCar, &deleteCar, &compareCar);
  List *sList = initializeList(&printCar, &deleteCar, &compareCar);
  List *wList = initializeList(&printCar, &deleteCar, &compareCar);
  numCars = parseCars(fPtr, nList, eList, sList, wList);

  runSimulation(fPtr, numCars, nList, eList, sList, wList);

  fclose(fPtr);
  deleteList(nList);
  deleteList(eList);
  deleteList(sList);
  deleteList(wList);

  printf("END PROGRAM\n");


return 0;
}
